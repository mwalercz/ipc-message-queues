%scanner Scanner.h
%print-tokens
%debug
%error-verbose
%baseclass-preinclude ../Tuple.hpp
%token INTEGER STRING FLOAT DIGIT WORD SIGN
%token OUTPUT READ INPUT
%token COMA, DCOLON, STAR, DOT
%polymorphic string_val: std::string;
             integer_val: int;
             float_val: float;

             tuple_elements: std::vector<Element>;
             tuple_element: Element;
             tuple: Tuple;

             parts: std::vector<std::string>;


%%
message:
    query
    {
        result(new Query)
    }
    | tuple
    {
        result(new Tuple)
    }
;

query:
    query_head parts

;

query_head:
    OUTPUT
    | READ
;

parts:
    part
    | parts COMA part
;

part:
    INTEGER DCOLON STAR
    | FLOAT DCOLON STAR
    | STRING DCOLON STAR
    | INTEGER DCOLON SIGN integer_val
    | FLOAT DCOLON SIGN float_val
    | STRING DCOLON SIGN string_val
;



integer_val:
    number

;

float_val:
    number DOT number
    | number DOT
;

string_val:
    WORD
    | string_val WORD
;

number:
    DIGIT
    | number DIGIT
;

tuple:
    tuple_head tuple_elements
;

tuple_head:
    INPUT
;

tuple_elements:
    tuple_element
    | tuple_elements COMA tuple_element
;

tuple_element:
    float_val
    | integer_val
    | string_val
;
